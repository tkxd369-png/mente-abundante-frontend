 <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Activa tu acceso ‚Äî The Master Key</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    body.ma-membership {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "DM Sans", sans-serif;
      background-color: #f6f0e8;
      color: #3a2f25;
      display: flex;
      flex-direction: column;
    }

    .ma-membership-shell {
      max-width: 960px;
      width: 100%;
      margin: 0 auto;
      padding: 2.2rem 1.4rem 2.8rem;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* HEADER (igual estilo que index) */
    .ma-landing-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .ma-logo-block {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }

    .ma-logo-tag {
      font-size: 0.7rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #9b8570;
    }

    .ma-logo-title {
      font-family: "Playfair Display", "Times New Roman", serif;
      font-size: 1.1rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #3a2f25;
    }

    .ma-login-link {
      font-size: 0.85rem;
      color: #7a6650;
      text-decoration: none;
      border-radius: 999px;
      border: 1px solid rgba(123, 102, 80, 0.25);
      padding: 0.35rem 0.9rem;
      background-color: #fdf8f1;
    }
    .ma-login-link:hover {
      background-color: #f5e4cf;
    }

    /* MAIN LAYOUT */
    .ma-membership-main {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 2.2rem;
      align-items: flex-start;
    }

    @media (max-width: 880px) {
      .ma-membership-main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* LADO IZQUIERDO: TEXTO / DETALLE */
    .ma-membership-copy-eyebrow {
      font-size: 0.75rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #9b8570;
      margin-bottom: 0.6rem;
    }

    .ma-membership-title {
      font-family: "Playfair Display", "Times New Roman", serif;
      font-size: 1.8rem;
      line-height: 1.3;
      color: #3a2f25;
      margin-bottom: 0.6rem;
    }

    .ma-membership-subtitle {
      font-size: 0.98rem;
      color: #7a6650;
      margin-bottom: 1.4rem;
      max-width: 30rem;
    }

    .ma-membership-highlights {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 0.75rem;
      margin-bottom: 1.6rem;
    }

    .ma-membership-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.8rem;
      padding: 0.4rem 0.75rem;
      border-radius: 999px;
      background: #efe0cc;
      color: #5f4b36;
    }

    .ma-membership-detail-list {
      font-size: 0.88rem;
      color: #7a6650;
      padding-left: 1.1rem;
    }
    .ma-membership-detail-list li {
      margin-bottom: 0.4rem;
    }

    .ma-membership-ref-hint {
      font-size: 0.8rem;
      color: #97826b;
      margin-top: 0.8rem;
    }

    /* LADO DERECHO: FORMULARIO */
    .ma-membership-form-card {
      background-color: #ffffff;
      border-radius: 24px;
      border: 1px solid rgba(0, 0, 0, 0.03);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
      padding: 1.6rem 1.5rem 1.4rem;
    }

    .ma-form-title {
      font-size: 0.9rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #9b8570;
      margin-bottom: 0.4rem;
    }

    .ma-form-amount {
      font-size: 1.05rem;
      color: #3a2f25;
      margin-bottom: 1.1rem;
    }

    .ma-form-row {
      margin-bottom: 0.85rem;
    }

    .ma-form-label {
      display: block;
      font-size: 0.8rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #9b8570;
      margin-bottom: 0.25rem;
    }

    .ma-form-input {
      width: 100%;
      padding: 0.7rem 0.8rem;
      border-radius: 12px;
      border: 1px solid rgba(0, 0, 0, 0.12);
      background-color: #fbf5ec;
      font-size: 0.9rem;
      color: #3a2f25;
      outline: none;
    }

    .ma-form-input::placeholder {
      color: #b39b7f;
    }

    .ma-form-input:focus {
      border-color: #e3a95a;
      box-shadow: 0 0 0 1px rgba(227, 169, 90, 0.24);
      background-color: #fffdf8;
    }

    .ma-form-input[readonly] {
      background-color: #f3ebdf;
      cursor: default;
    }

    .ma-form-inline {
      display: flex;
      gap: 0.75rem;
    }

    @media (max-width: 600px) {
      .ma-form-inline {
        flex-direction: column;
      }
    }

    .ma-form-terms {
      margin-top: 0.8rem;
      margin-bottom: 0.4rem;
      font-size: 0.8rem;
      color: #7a6650;
      display: flex;
      align-items: flex-start;
      gap: 0.45rem;
    }

    .ma-form-terms input[type="checkbox"] {
      margin-top: 0.12rem;
    }

    .ma-form-error {
      min-height: 1.1rem;
      font-size: 0.8rem;
      color: #c04730;
      margin-bottom: 0.6rem;
    }

    .ma-form-note {
      font-size: 0.78rem;
      color: #97826b;
      margin-top: 0.4rem;
      line-height: 1.4;
    }

    .ma-form-cta {
      margin-top: 1rem;
    }

    .ma-form-button {
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 0.9rem 1.5rem;
      font-size: 0.95rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      background: linear-gradient(135deg, #f2c47b, #e3a95a);
      color: #2c241b;
      cursor: pointer;
      box-shadow: 0 16px 46px rgba(226, 167, 90, 0.5);
    }

    .ma-form-button:hover {
      filter: brightness(1.03);
    }

    /* FOOTER MINI */
    .ma-membership-footer {
      margin-top: 2.4rem;
      font-size: 0.8rem;
      color: #97826b;
      text-align: center;
    }

    .ma-membership-footer a {
      color: #7a6650;
      text-decoration: underline;
      text-underline-offset: 3px;
    }
  </style>
</head>

<body class="ma-membership">
  <div class="ma-membership-shell">
    <!-- HEADER -->
    <header class="ma-landing-header">
      <div class="ma-logo-block">
        <span class="ma-logo-tag">Programa privado</span>
        <span class="ma-logo-title">The Master Key</span>
      </div>
      <a href="login.html" class="ma-login-link">Entrar</a>
    </header>

    <!-- MAIN -->
    <main class="ma-membership-main">
      <!-- LADO IZQUIERDO: CONTEXTO -->
      <section>
        <div class="ma-membership-copy-eyebrow">Paso 2 ¬∑ Activar acceso</div>
        <h1 class="ma-membership-title">Tu decisi√≥n se convierte en acceso.</h1>

        <p class="ma-membership-subtitle">
          Aqu√≠ confirmas tus datos y activas tu acceso a <strong>The Master Key</strong> y a la comunidad de The Master Key. Esta contribuci√≥n es √∫nica, tu puerta de entrada como miembro fundador.
        </p>

        <div class="ma-membership-highlights">
          <div class="ma-membership-chip">
            ‚ú® Acceso al contenido central y al video principal
          </div>
          <div class="ma-membership-chip">
            ü§ù Comunidad privada de The Master Key
          </div>
          <div class="ma-membership-chip">
            üîë Programa de referidos exclusivo para miembros
          </div>
        </div>

        <ul class="ma-membership-detail-list">
          <li>Pago √∫nico para activar tu acceso al programa.</li>
          <li>Tu c√≥digo de invitaci√≥n asegura que tu patrocinador reciba cr√©dito.</li>
          <li>Despu√©s de confirmar, ver√°s el video completo y los siguientes pasos.</li>
        </ul>

        <div id="refInfo" class="ma-membership-ref-hint"></div>
      </section>

      <!-- LADO DERECHO: FORMULARIO -->
      <aside class="ma-membership-form-card">
        <div class="ma-form-title">Confirmar activaci√≥n</div>
        <div class="ma-form-amount">Contribuci√≥n √∫nica: <strong>USD $777</strong></div>

        <div class="ma-form-row ma-form-inline">
          <div style="flex:1;">
            <label class="ma-form-label" for="fullName">Nombre completo</label>
            <input
              id="fullName"
              class="ma-form-input"
              type="text"
              placeholder="Como aparece en tus documentos"
              autocomplete="name"
            />
          </div>
        </div>

        <div class="ma-form-row ma-form-inline">
          <div style="flex:1;">
            <label class="ma-form-label" for="email">Email</label>
            <input
              id="email"
              class="ma-form-input"
              type="email"
              placeholder="tucorreo@ejemplo.com"
              autocomplete="email"
            />
          </div>
          <div style="flex:1;">
            <label class="ma-form-label" for="phone">Tel√©fono</label>
            <input
              id="phone"
              class="ma-form-input"
              type="tel"
              placeholder="+1 ..."
              autocomplete="tel"
            />
          </div>
        </div>

        <div class="ma-form-row">
  <label class="ma-form-label" for="country">Pa√≠s</label>
  <select id="country" class="ma-form-input">
    <!-- Opciones se llenan por JavaScript -->
  </select>
</div>


        <div class="ma-form-row">
          <label class="ma-form-label" for="refCode">C√≥digo de invitaci√≥n</label>
          <input
            id="refCode"
            class="ma-form-input"
            type="text"
            placeholder="Se llena autom√°ticamente si vienes con link"
            readonly
          />
        </div>

      <div class="ma-form-terms">
  <input type="checkbox" id="termsCheck" />
  <label for="termsCheck">
    Confirmo que esta contribuci√≥n es final y que he le√≠do y acepto los
    <a href="terminos.html" target="_blank">T√©rminos y Condiciones</a>
    y la pol√≠tica de no reembolsos.
  </label>
</div>
 

        <div id="formError" class="ma-form-error"></div>

        <div class="ma-form-cta">
          <button id="btnContinuarPago" type="button" class="ma-form-button">
            Continuar al pago
          </button>
        </div>

        <div class="ma-form-note">
          En la siguiente pantalla ver√°s el detalle de tu contribuci√≥n y el acceso al video principal. Tu c√≥digo de invitaci√≥n quedar√° ligado a tu cuenta.
        </div>
      </aside>
    </main>

    <!-- FOOTER -->
  <footer class="ma-membership-footer">
  ¬øTienes dudas? Puedes volver al inicio o entrar a tu cuenta si ya eres miembro.
  <br />
  <a href="index.html">Volver a The Master Key</a> ¬∑
  <a href="login.html">Entrar a tu cuenta</a> ¬∑
  <a href="terminos.html" target="_blank">T√©rminos y Condiciones</a>
</footer>
 
  </div>

  <script>
    (function () {
 const MA_PAYOUT_COUNTRIES = [
  { code: "US", name: "Estados Unidos" },
  { code: "CA", name: "Canad√°" },
  { code: "MX", name: "M√©xico" },
  { code: "AR", name: "Argentina" },
  { code: "BO", name: "Bolivia" },
  { code: "BR", name: "Brasil" },
  { code: "CL", name: "Chile" },
  { code: "CO", name: "Colombia" },
  { code: "CR", name: "Costa Rica" },
  { code: "DO", name: "Rep√∫blica Dominicana" },
  { code: "EC", name: "Ecuador" },
  { code: "PA", name: "Panam√°" },
  { code: "PE", name: "Per√∫" },
  { code: "PY", name: "Paraguay" },
  { code: "SV", name: "El Salvador" },
  { code: "UY", name: "Uruguay" }
];

      const params = new URLSearchParams(window.location.search);
      const refFromUrl = params.get("ref") || "";
      let refCode = refFromUrl;

      // Recuperar ref desde localStorage si no vino en URL
      try {
        const storedRef = localStorage.getItem("ma_ref_code");
        if (!refCode && storedRef) {
          refCode = storedRef;
        }
      } catch (e) {
        // ignore
      }

      // Guardar ref en localStorage para el resto del flujo
      try {
        if (refCode) {
          localStorage.setItem("ma_ref_code", refCode);
        }
      } catch (e) {
        // ignore
      }

      // Prefill del c√≥digo en el campo
      const refInput = document.getElementById("refCode");
      const refInfo = document.getElementById("refInfo");
      if (refInput) {
        refInput.value = refCode || "";
      }
      if (refInfo) {
        if (refCode) {
          refInfo.textContent =
            "Est√°s activando tu acceso con el c√≥digo de invitaci√≥n: " + refCode + ".";
        } else {
          refInfo.textContent =
            "Si alguien te invit√≥, aseg√∫rate de usar su link personal para que su c√≥digo se registre correctamente.";
        }
      }
function populateCountrySelect(selectEl, preSelected) {
  if (!selectEl) return;

  selectEl.innerHTML = "";

  const placeholder = document.createElement("option");
  placeholder.value = "";
  placeholder.textContent = "Selecciona tu pa√≠s";
  selectEl.appendChild(placeholder);

  MA_PAYOUT_COUNTRIES.forEach((c) => {
    const opt = document.createElement("option");
    opt.value = c.code;
    opt.textContent = c.name;
    selectEl.appendChild(opt);
  });

  if (preSelected) {
    selectEl.value = preSelected;
  }
}

      // Prefill desde lo que ya se haya guardado
      const fullNameInput = document.getElementById("fullName");
      const emailInput = document.getElementById("email");
      const phoneInput = document.getElementById("phone");
      const countryInput = document.getElementById("country");
      const termsCheck = document.getElementById("termsCheck");
      const formError = document.getElementById("formError");
      const btnContinuar = document.getElementById("btnContinuarPago");

      try {
        const preName = localStorage.getItem("ma_pre_fullName");
        const preEmail = localStorage.getItem("ma_pre_email");
        const prePhone = localStorage.getItem("ma_pre_phone");
        const preCountry = localStorage.getItem("ma_pre_country");

        if (preName && fullNameInput) fullNameInput.value = preName;
        if (preEmail && emailInput) emailInput.value = preEmail;
        if (prePhone && phoneInput) phoneInput.value = prePhone;
        // llenar el dropdown din√°micamente
populateCountrySelect(countryInput, preCountry || "");

      } catch (e) {
        // ignore
      }

      function showError(msg) {
        if (formError) formError.textContent = msg || "";
      }

      if (btnContinuar) {
        btnContinuar.addEventListener("click", function () {
          const fullName = (fullNameInput?.value || "").trim();
          const email = (emailInput?.value || "").trim();
          const phone = (phoneInput?.value || "").trim();
          const country = (countryInput?.value || "").trim();
          const termsAccepted = !!(termsCheck && termsCheck.checked);

          if (!fullName || !email || !phone) {
            showError("Por favor completa al menos nombre, email y tel√©fono.");
            return;
          }
          if (!termsAccepted) {
            showError("Debes confirmar los t√©rminos antes de continuar.");
            return;
          }

          showError("");

          // Guardar datos previos en localStorage para las siguientes pantallas
          try {
            localStorage.setItem("ma_pre_fullName", fullName);
            localStorage.setItem("ma_pre_email", email);
            localStorage.setItem("ma_pre_phone", phone);
            localStorage.setItem("ma_pre_country", country || "");
            if (refCode) {
              localStorage.setItem("ma_ref_code", refCode);
            }
          } catch (e) {
            // ignore
          }

          // Aqu√≠ todav√≠a es flujo simulado: ir a puente-video.html
          // (puedes cambiar despu√©s a checkout real de Stripe)
          window.location.href = "puente-video.html";
        });
      }
    })();
  </script>
</body>
</html>
