 
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Mente Abundante - Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Fuentes -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=DM+Sans:wght@400;500;600&family=Dancing+Script:wght@500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body class="ma-body ma-dashboard">
    <div class="ma-page-wrapper ma-dashboard-wrapper">
      <!-- HEADER -->
      <header id="dashboardHeader" class="ma-dashboard-header">
        <div class="ma-dashboard-brand-row">
          <h1 class="ma-logo">MENTE ABUNDANTE</h1>
        </div>

        <div class="ma-dashboard-user-row">
          <div class="ma-dashboard-user-name">
            <span id="dashName" class="ma-user-name">Nombre</span>
          </div>

          <div class="ma-dashboard-user-meta">
            <!-- Badge referidos + estimado (JS escribe el texto) -->
            <button id="dashRefBadge" class="ma-ref-badge" type="button">
              <span id="dashReferralsText">0 REFERIDOS</span>
              <span id="dashEstimateText">$0 USD ESTIMADO</span>
            </button>
            <button class="ma-icon-button" id="dashMenuBtn" type="button">
              ⋮
            </button>
          </div>
        </div>
      </header>

      <!-- CONTENIDO SCROLL -->
      <main class="ma-dashboard-main">
        <!-- Bloque 1: Frase AI -->
        <section class="ma-card ma-block ma-block-phrase">
          <h2 class="ma-section-label">TU FRASE DE HOY</h2>
          <p id="aiPhraseText" class="ma-phrase-text">
            “Tu decisión de hoy abre puertas que aún no imaginas.”
          </p>
        </section>

        <!-- Bloque 2: Pinterest -->
        <section class="ma-card">
          <h2 class="ma-section-label">INSPIRACIÓN VISUAL</h2>
          <div id="pinterestEmbed" class="ma-embed-box">
            <a
              data-pin-do="embedBoard"
              data-pin-board-width="420"
              data-pin-scale-height="320"
              data-pin-scale-width="120"
              href="https://www.pinterest.com/agconst/mente-abundante/"
            >
            </a>
          </div>
        </section>

        <!-- Bloque 3: TikTok -->
        <section class="ma-card">
          <h2 class="ma-section-label">VIDEOS TIKTOK / REELS</h2>
          <div class="ma-embed-box ma-embed-elfsight">
            <div
              class="elfsight-app-c7aa3b7a-2625-4e48-932a-c5a323679564"
              data-elfsight-app-lazy
            ></div>
          </div>
        </section>

  <!-- === TUS ACCESOS RÁPIDOS === -->
 <section class="ma-card">
  <div class="ma-section-label">TUS ACCESOS RÁPIDOS</div>

  <div class="ma-quick-row">
    <!-- Tarjeta E-BOOK -->
    <div class="ma-quick-card ma-quick-card-ebook">
      <!-- aquí va tu contenido actual de E-BOOK -->
      ...
    </div>

    <!-- Tarjeta HERRAMIENTAS -->
    <div class="ma-quick-card ma-quick-card-tools">
      <!-- aquí va tu contenido actual de Herramientas ($) -->
      ...
    </div>

    <!-- Tarjeta TU QR -->
    <div class="ma-quick-card ma-quick-card-qr">
      <!-- aquí pega el contenido de la tarjeta TU QR que hoy está abajo -->
      ...
    </div>
  </div>

  <!-- Debajo puedes dejar el texto:
       "Comparte tu QR para que tus invitados lleguen..." -->
  <p>Comparte tu QR para que tus invitados lleguen directo a tu página de inicio.</p>
</section>

        <!-- Bloque 5: Newsletter / anuncios -->
        <section class="ma-card ma-block ma-block-news">
          <h2 class="ma-section-label">NEWSLETTER & ANUNCIOS</h2>
          <p class="ma-news-text">
            Próximos lanzamientos, noticias de la comunidad y recordatorios
            importantes aparecerán aquí.
          </p>
        </section>
      </main>

      <!-- FOOTER -->
      <footer class="ma-dashboard-footer">
        <div class="ma-footer-refid" id="footerRefId">
          CÓDIGO: ———
        </div>

        <div class="ma-footer-btn-row">
          <button type="button" class="ma-footer-btn" id="footerNewBooksBtn">
            NUEVOS LIBROS
          </button>
          <button type="button" class="ma-footer-btn" id="footerNewsBtn">
            NOVEDADES
          </button>
          <button type="button" class="ma-footer-btn" id="footerExtraBtn">
            ANUNCIOS
          </button>
        </div>

        <button type="button" class="ma-footer-logout" id="logoutBtn">
          CERRAR SESIÓN
        </button>
      </footer>
    </div>

    <!-- Toast -->
    <div id="maToast" class="ma-toast">Copiado</div>

    <!-- Popup QR grande (único) -->
    <div class="ma-qr-modal" id="qrModal">
      <div class="ma-qr-modal-backdrop" id="qrModalBackdrop"></div>
      <div class="ma-qr-modal-content">
        <button class="ma-qr-modal-close" id="qrModalClose" type="button">
          &times;
        </button>
        <h2 class="ma-qr-modal-title">Tu código de invitación</h2>
        <p class="ma-qr-modal-ref" id="qrModalRefText">CÓDIGO: ———</p>
        <canvas id="qrModalCanvas" class="ma-qr-modal-canvas"></canvas>
        <p class="ma-qr-modal-help">
          Pide que escaneen este QR o comparte tu enlace personal.
        </p>
      </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
    <script src="app.js"></script>
    <script async defer src="https://assets.pinterest.com/js/pinit.js"></script>
    <script src="https://elfsightcdn.com/platform.js" async></script>

    <!-- Header compact al hacer scroll -->
    <script>
      (function () {
        const header = document.getElementById("dashboardHeader");
        if (!header) return;
        function onScroll() {
          const y = window.scrollY || document.documentElement.scrollTop;
          if (y > 24) {
            header.classList.add("ma-header-compact");
          } else {
            header.classList.remove("ma-header-compact");
          }
        }
        window.addEventListener("scroll", onScroll, { passive: true });
        onScroll();
      })();
    </script>

    <!-- QR pequeño + modal QR grande -->
    <script>
      (function () {
        // Elementos del dashboard
        const qrTile = document.getElementById("qrTile");
        const qrCanvasSmall = document.getElementById("qrCanvas");

        const modal = document.getElementById("qrModal");
        const modalBackdrop = document.getElementById("qrModalBackdrop");
        const modalClose = document.getElementById("qrModalClose");
        const modalCanvas = document.getElementById("qrModalCanvas");
        const modalRefText = document.getElementById("qrModalRefText");

        if (!qrTile || !qrCanvasSmall || !modal || !modalCanvas) {
          return;
        }

        // Obtener usuario y refid desde localStorage
        let user = null;
        try {
          user = JSON.parse(localStorage.getItem("ma_user") || "{}");
        } catch (e) {
          user = {};
        }

        const refid = user.refid || user.refId || "———";

        // Construir link personal: https://TU-DOMINIO/index.html?ref=REFID
        const baseUrl = window.location.origin + "/index.html";
        const personalLink =
          refid && refid !== "———"
            ? baseUrl + "?ref=" + encodeURIComponent(refid)
            : baseUrl;

        // Pequeño QR en la tarjeta
        try {
          new QRious({
            element: qrCanvasSmall,
            value: personalLink,
            size: 68,
          });
        } catch (e) {
          console.warn("No se pudo generar el QR pequeño:", e);
        }

        // QR grande en el modal
        try {
          new QRious({
            element: modalCanvas,
            value: personalLink,
            size: 220,
          });
        } catch (e) {
          console.warn("No se pudo generar el QR grande:", e);
        }

        // Texto del código en el modal
        if (modalRefText) {
          modalRefText.textContent = "CÓDIGO: " + (refid || "———");
        }

        // Funciones para abrir/cerrar modal
        function openModal() {
          modal.classList.add("is-visible");
        }

        function closeModal() {
          modal.classList.remove("is-visible");
        }

        // Conectar eventos
        qrTile.addEventListener("click", openModal);
        if (modalBackdrop) {
          modalBackdrop.addEventListener("click", closeModal);
        }
        if (modalClose) {
          modalClose.addEventListener("click", closeModal);
        }
      })();
    </script>
  </body>
</html>
